！doctype>超文本标记语言！doctype html>
超文本标记语言<"zh-CN"HTML lang="zh-CN">
>头>头<
元< 字符集=元<"UTF-8"meta字符集=>"UTF-8"
元名称<=“视口”内容=“宽度=设备宽度，初始比例=1.0”>元< 姓名="视口" 内容=>"宽度=设备宽度，初始比例=1.0"
>标题>次元站-基于番组计划API的动漫平台<标题标题>标题</次元站-基于番组计划API的动漫平台>标题</
<！--引入顺风 ！--引入顺风< >CSS--CSS--<！--引入顺风 CSS-->
脚本< src=脚本"https://cdn.tailwindcss.com"脚本脚本</<脚本 src="https://cdn.tailwindcss.com"脚本>脚本>
<！ --引入字体棒极了图标-->！ --引入字体棒极了图标--<<！ --令人惊叹的图标引入字体-->
链接<rel=href"样式表"HTTPS=链接<"：//cdnjs.cloudFlare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"linkrel="样式表"href="HTTPS://cdnjs.CloudFlare.com/ajax/libs/font-awesome/6。5.1/css/all.min.CSS">
！--引入Axios<<！--引入Axios处理网络请求引入Axios)-->><！--引入Axios(处理网络请求)-->
脚本<src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"脚本脚本脚本><脚本src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"脚本脚本脚本>
<！--顺风配置-->！--顺风配置--<<! --顺风配置-->
>脚本<<脚本>
顺风.配置=顺风顺风.配置={
主题：{主题: {
扩展：//主色-紫(动漫风格)主要：'#7E22CE'，//主色-紫(动漫风格)'#7E22CE'主要：//主色-紫(动漫风格)主要：'#7E22CE'，//主色-紫（动漫风格）
颜色：{颜色:{
延伸: {
//辅色-粉secondary：'#F472B6'，//辅色-粉次要的：，//辅色-粉secondary：'#F472B6'，//辅色-粉
'#1E293B'深色：深色：：'#1E293B'，
'#F8FAFC'光源：：'#F8FAFC'
                    },
fontFamilyfontFamily:fontFamily：{
动漫'"Noto Sans SC"'动漫，'无衬线']动漫：'"Noto Sans SC"""Noto Sans SC"'，'无衬线”无衬线'
                    
}
            }
        }
脚本<脚本</>>
风格<类型=>"text/tailwindcss"风格<类型=>"text/tailwindcss"
@层实用程序{
.动漫卡{
@apply bg-primary text-white px-4py-2 rounded-lg hover:bg-primary/80过渡-all；
.nav-item{
.BTN-主要的
            
}
.nav-item
@apply px-4py-2 悬停：文本-主过渡-所有光标-指针；
}
.内容容器{
@apply max-w-7xl mx-auto px-4PY-8；
}
        }
    </风格>
</头>
<身体 班级="bg-gray-100 font-anime">
<! -- 导航栏 -->
    <页眉 班级="粘顶-0bg-牛皮书-md Z-50">
        <div 班级="内容-容器灵活对齐-项目间-居中">
            <div 班级="弹性项-中心间隙-2">
                <我 班级="fa-solid FA-TV text-3xl text-primary"></我>
                <H1 班级="text-2xl字体-粗体文本-深色">次元站</H1>
            </div>
<! -- 搜索框 -->
            <div 班级="相对w-1/3MD:w-1/4">
                <输入 类型="文本" 身份标识="搜索输入" 占位符="搜索番剧/角色..." 
                    班级=w-全px-4py-2圆角-lg"边框边框灰-300焦点：轮廓-无焦点：边框-主">
                <按钮 身份标识="搜索-btn" 班级="绝对右-2顶部-1/2-翻译-y-1/2文本-主要">
                    <我 班级="fa-solid fa-search"></我>
                </按钮>
</div>
<! -- 导航菜单 -->
            <NAV 班级="隐藏md：弹性项-中心间距-2">
                <div 班级="导航项目已激活">首页</div>
                <div 班级="导航项目" 身份标识="类别-btn">分类</div>
                <div 班级="导航项目">排行榜</div>
                <div 班级="导航项目">我的收藏</div>
            </NAV>
<! -- 移动端菜单按钮 -->
            <按钮 班级="md：隐藏文本-深色文本-2xl" 身份标识="menu-btn">
                <我 班级="fa-solid fa-bars"></我>
            </按钮>
</div>
<! -- 分类弹窗 -->
        <div 身份标识="类别-模态" 班级="隐藏固定顶部-16左-0宽-全边框-白色阴影-LG Z-40py-4PX-8网格-cols-2md：网格-cols-4间隙-4">
            <div 班级="类别-项目py-2悬停：文本-主要光标-指针" 数据类型="1">动画</div>
            <div 班级="类别-项目py-2悬停：文本-主要光标-指针" 数据类型="2">漫画</div>
            <div 班级="类别-项目py-2悬停：文本-主要光标-指针" 数据类型="3">游戏</div>
            <div 班级="类别-项目py-2悬停：文本-主要光标-指针" 数据类型="4">小说</div>
        </div>
    </页眉>

<! -- 轮播图（推荐番剧） -->
    <部分 班级="bg-深色文本-浅色">
        <div 班级="内容容器py-6">
            <div 班级="灵活对齐-项目间-中心MB-4">
                <H2 班级="text-xl md:text-2xl font-bold">热门推荐</H2>
                <一个 href="#" 班级="文本辅助悬停：下划线">查看更多</一个>
            </div>
            <div 班级="转盘溢流-x-自动PB-4间隙-4弯曲" 身份标识="转盘-容器">
<! -- 轮播内容由JS动态生成 -->
            </div>
        </div>
    </部分>

<! -- 番剧列表 -->
    <主要的 班级="content-container">
        <H2 班级="text-xl md:text-2xl font-bold mb-6 text-dark">最新番剧</H2>
        <div 班级="网格列-2sm：网格列-3md：网格列-4lg：网格列-6间隙-6" 身份标识="动漫列表">
<! -- 番剧卡片由JS动态生成 -->
        </div>
<! -- 加载更多按钮 -->
        <div 班级="弹性对正中心MT-10">
            <按钮 身份标识="加载更多" 班级="btn-主要弹性项-中心间隙-2">
                <跨度>加载更多</跨度>
                <我 班级="fa-solid fa-spinner fa-spin隐藏" 身份标识="负载旋转器"></我>
            </按钮>
        </div>
    </主要的>

<! -- 番剧详情弹窗 -->
    <div 身份标识="detail-modal" 班级="隐藏固定嵌入件0bg-黑色/70Z-50弹性件-中心对齐-中心p-4">
        <div 班级="bg-深色文本-浅色圆角-lg w-完全max-w-4xl max-h-[80vh]溢出-自动">
            <按钮 身份标识="关闭模式" 班级="绝对顶部-4右侧-4文本-白色文本-2xl bg-黑色/50圆角-满W-10H-10弹性项-中心对齐-中心">
                <我 班级="fa-solid fa-xmark"></我>
            </按钮>
            <div 班级="网格列-1md：网格列-3">
<! -- 详情封面 -->
                <div 班级="p-4md:col-span-1">
                    <IMG 身份标识="细节-封面" src="" alt="" 班级="w-完全舍入-lg">
                    <div 班级=MT-4"灵活对齐-项目间-中心">
                        <跨度 身份标识="detail-score" 班级="文本-黄色-400字体-粗体"></跨度>
                        <跨度 身份标识="详细类型" 班级="bg-primary/70PX-2PY-1舍入文本-xs"></跨度>
                    </div>
                </div>
<! -- 详情内容 -->
                <div 班级="p-4md:col-span-2">
                    <H3 身份标识="详细信息-标题" 班级="text-2xl字体加粗MB-2"></H3>
                    <p 身份标识="detail-subtitle" 班级="文本灰-400 MB-4"></p>
                    <div 班级="MB-4网格网格列-2间隙-2文本-sm">
                        <div><跨度 班级="文本-灰色400">集数：</跨度><跨度 身份标识="detail-eps"></跨度></div>
                        <div><跨度 班级="文本-灰色400">开播：</跨度><跨度 身份标识="detail-date"></跨度></div>
                        <div><跨度 班级="文本-灰色400">地区：</跨度><跨度 身份标识="详图区域"></跨度></div>
                        <div><跨度 班级="文本-灰色400">标签：</跨度><跨度 身份标识="详细标签"></跨度></div>
                    </div>
                    <div 班级="MB-4">
                        <H4 班级="字体加粗MB-2">剧情简介</H4>
                        <p 身份标识="detail-desc" 班级="文本-灰色-300行距-松弛"></p>
                    </div>
                    <按钮 班级="btn-主要w-完全">开始观看</按钮>
                </div>
            </div>
        </div>
    </div>

<! -- 页脚 -->
    <页脚 班级="bg-深色文本-浅色PY-8MT-10">
        <div 班级="内容-容器文本-中心">
            <p>本网站数据来源于<一个 href="https://bgm.tv/" 班级="文本主要悬停：下划线" 目标="_空白">番组计划(班古米)</一个>，仅作学习使用，请勿商用</p>
            <p 班级="MT-2文本-灰色400">© 2025 次元站 - 所有番剧版权归原作者及发行商所有</p>
        </div>
    </页脚>

    <脚本>
// 全局变量
让CurrentPage=1；
Const page_SIZE=12；
// 跨域代理配置（手机端专用，稳定不失效）
常量proxy_URL='https://cors-anywhere.herokuapp.com/';
Const BANGUMI_API=PROXY_URL+'https://bgm.tv/api/v0';

// 页面加载完成后执行
文件。addEventListener('DOMContentLoaded'，()=>{
initEvent()；//初始化事件
getCarouselData()；//获取轮播图数据
getAnimeList(currentPage，PAGE_SIZE)；//获取番剧列表
        });

// 初始化所有事件监听
函数initEvent(){
// 搜索按钮
文件。getElementById('search-btn')。addEventListener('click'，()=>{
Const关键字=文件.getElementById('search-input').价值。修剪()；
if(关键字)searchAnime(关键字)；
            });
// 搜索框回车
文件。getElementById('search-input')。addEventListener('keydown'，(e)=>{
if(e.key==='Enter')文件。getElementById('search-btn')。点击()；
            });
// 分类按钮
文件。getElementById('category-btn')。addEventListener('click'，()=>{
文件。getElementById('category-modal').classList.toggle('hidden')；
            });
// 分类项点击
文件。querySelectorAll('.Category-item').foreach(item=>{
item.addEventListener('click'，()=>{
常量类型=item.dataset.type；
                    getAnimeList(1, PAGE_SIZE, type);
                    document.getElementById('category-modal').classList.add('hidden');
                });
            });
            // 加载更多
            document.getElementById('load-more').addEventListener('click', () => {
                currentPage++;
                getAnimeList(currentPage, PAGE_SIZE);
            });
            // 关闭详情弹窗
            document.getElementById('close-modal').addEventListener('click', () => {
                document.getElementById('detail-modal').classList.add('hidden');
            });
            // 移动端菜单
            document.getElementById('menu-btn').addEventListener('click', () => {
                document.getElementById('category-modal').classList.toggle('hidden');
            });
            // 点击弹窗外部关闭
            document.getElementById('detail-modal').addEventListener('click', (e) => {
                if (e.target === document.getElementById('detail-modal')) {
                    document.getElementById('detail-modal').classList.add('hidden');
                }
            });
        }

        // 获取轮播图数据（热门番剧）
        async function getCarouselData() {
            try {
                const res = await axios.get(`${BANGUMI_API}/subjects/popular?type=1`);
                const data = res.data;
                const carousel = document.getElementById('carousel-container');
                carousel.innerHTML = '';
                data.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'carousel-item w-48 sm:w-64 flex-shrink-0';
                    div.innerHTML = `
                        <img src="${item.images.large}" alt="${item.name}" class="w-full h-64 object-cover rounded-lg">
                        <p class="mt-2 text-center font-medium truncate">${item.name}</p>
                    `;
                    div.addEventListener('click', () => showDetail(item.id));
                    carousel.appendChild(div);
                });
            } catch (err) {
                console.error('轮播图数据获取失败：', err);
                alert('数据加载失败，请刷新页面');
            }
        }

        // 获取番剧列表
        async function getAnimeList(page, size, type = 1) {
            try {
                const spinner = document.getElementById('load-spinner');
                spinner.classList.remove('hidden');
                const res = await axios.get(`${BANGUMI_API}/subjects`, {
                    params: { type, page, limit: size, sort: 'id' }
                });
                const data = res.data;
                const list = document.getElementById('anime-list');
                if (page === 1) list.innerHTML = ''; // 第一页清空，后续追加
                data.forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'anime-card';
                    card.innerHTML = `
                        <img src="${item.images.common}" alt="${item.name}" class="w-full h-48 object-cover">
                        <div class="p-3">
                            <h3 class="font-bold truncate">${item.name}</h3>
                            <p class="text-xs text-gray-400 mt-1 truncate">${item.name_cn || '暂无中文名'}</p>
                            <div class="flex justify-between items-center mt-2">
                                <span class="text-yellow-400 text-xs font-bold">${item.rating.score || '暂无评分'}</span>
                                <span class="text-xs bg-gray-700 px-1 rounded">${item.eps || '0'}集</span>
                            </div>
                        </div>
                    `;
                    // 点击卡片查看详情
                    card.addEventListener('click', () => showDetail(item.id));
                    list.appendChild(card);
                });
            } catch (err) {
                console.error('番剧列表获取失败：', err);
                alert('番剧列表加载失败');
            } finally {
                document.getElementById('load-spinner').classList.add('hidden');
            }
        }

        // 搜索番剧
        async function searchAnime(keyword) {
            try {
                const res = await axios.get(`${BANGUMI_API}/search/subjects`, {
                    params: { q: keyword, type: 1, limit: 24 }
                });
                const data = res.data;
                const list = document.getElementById('anime-list');
                list.innerHTML = '';
                if (data.length === 0) {
                    list.innerHTML = '<div class="col-span-full text-center py-10 text-gray-500">暂无搜索结果</div>';
                    return;
                }
                data.forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'anime-card';
                    card.innerHTML = `
                        <img src="${item.images.common}" alt="${item.name}" class="w-full h-48 object-cover">
                        <div class="p-3">
                            <h3 class="font-bold truncate">${item.name}</h3>
                            <p class="text-xs text-gray-400 mt-1 truncate">${item.name_cn || '暂无中文名'}</p>
                            <div class="flex justify-between items-center mt-2">
                                <span class="text-yellow-400 text-xs font-bold">${item.rating.score || '暂无评分'}</span>
                                <span class="text-xs bg-gray-700 px-1 rounded">${item.eps || '0'}集</span>
                            </div>
                        </div>
                    `;
                    card.addEventListener('click', () => showDetail(item.id));
                    list.appendChild(card);
                });
            } catch (err) {
                console.error('搜索失败：', err);
                alert('搜索失败，请重试');
            }
        }

        // 显示番剧详情
        async function showDetail(id) {
            try {
                const res = await axios.get(`${BANGUMI_API}/subjects/${id}`);
                const data = res.data;
                // 填充详情数据
                document.getElementById('detail-cover').src = data.images.large;
                document.getElementById('detail-title').innerText = data.name;
                document.getElementById('detail-subtitle').innerText = data.name_cn || '暂无中文名';
                document.getElementById('detail-score').innerText = `评分：${data.rating.score || '暂无'}`;
                document.getElementById('detail-type').innerText = getTypeText(data.type);
                document.getElementById('detail-eps').innerText = data.eps || '未知';
                document.getElementById('detail-date').innerText = data.date || '未知';
                document.getElementById('detail-area').innerText = data.platform || '未知';
                document.getElementById('detail-tags').innerText = data.tags.map(tag => tag.name).join(' / ') || '暂无';
                document.getElementById('detail-desc').innerText = data.summary || '暂无剧情简介';
                // 显示弹窗
                document.getElementById('detail-modal').classList.remove('hidden');
            } catch (err) {
                console.error('详情获取失败：', err);
                alert('番剧详情加载失败');
            }
        }

        // 转换类型为中文
        function getTypeText(type) {
            const typeMap = { 1: '动画', 2: '漫画', 3: '游戏', 4: '小说' };
            return typeMap[type] || '未知';
        }
    </script>
</body>
</html>
